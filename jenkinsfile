pipeline {
    agent any
    stages {
        stage('Install dependencies - Client') {
            steps {
                script {
                    dir('client') {  // Access the client directory
                        sh 'npm install'
                    }
                }
            }
        }
        stage('Install dependencies - Server') {
            steps {
                script {
                    dir('server') {  // Access the server directory
                        sh 'npm install'
                    }
                }
            }
        }
        stage('Unit Test - Client') {
            steps {
                script {
                    dir('client') {  // Run tests in the client directory
                        def status = sh(script: 'npm test', returnStatus: true)
                        if (status != 0) {
                            error "Client tests failed"
                        }
                    }
                }
            }
        }
        stage('Unit Test - Server') {
            steps {
                script {
                    dir('server') {  // Run tests in the server directory
                        def status = sh(script: 'npm test', returnStatus: true)
                        if (status != 0) {
                            error "Server tests failed"
                        }
                    }
                }
            }
        }
        stage('Build application - Client') {
            steps {
                script {
                    dir('client') {  // Build the client
                        sh 'npm run build-dev'
                    }
                }
            }
        }
        stage('Build application - Server') {
            steps {
                script {
                    dir('server') {  // Build the server
                        sh 'npm run build-dev'
                    }
                }
            }
        }
       